


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    
  <title>#gitfr</title>
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://feeds.feedburner.com/gitfr" />
<link rel='stylesheet' href='/css/pygments_tango.css' type='text/css' />

<link rel='stylesheet' href='/css/pygments_murphy.css' type='text/css' />
<link rel='stylesheet' href='/css/pygments_tango.css' type='text/css' />
<link rel='stylesheet' href='/css/site.css' type='text/css' />
<link rel='stylesheet' href='/css/documentation.css' type='text/css' />
<link rel='stylesheet' href='/css/jquery.tweet.css' type='text/css' />

<script type="text/javascript" src="/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="/js/jquery.tweet.js"></script>
<script type="text/javascript" src="/js/googleRSSWidget.js"></script>
<script type="text/javascript" src="/js/site.js"></script>



  </head>
  <body>
    <div id="content">
      
  
<div id="header" onclick="location.href='/';" style="cursor: pointer;">
  <div id="plugbanner"></div>
  <div id="blog_logo"></div>
  <h1><a href="/">
      <span id="blog_name">
        #gitfr
      </span>
    </a>
  </h1>
</div>
<a href="http://github.com/gitfr/website"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
<div id="top_bar">
  <div class="ButtonBar">
    <ul>
      <li><a href="/">Accueil</a></li>
      <li><a href="/blog">Blog</a></li>
    </ul>
  </div>
  <div id="search">    
    <form id="searchform" method="get" action="http://www.google.com/search">
      <input type="hidden" name="ie" value="UTF-8">
      <input type="hidden" name="oe" value="UTF-8">
      <input type="hidden" name="domains" value="www.gitfr.net">
      <input type="hidden" name="sitesearch" value="www.gitfr.net">
      <input name="q" id="q" size="20" value="recherche..." onfocus="if(this.value==this.defaultValue) this.value='';" type="text">
    </form>
  </div>
</div>



      <div id="main_block">
        <div id="prose_block">
          

<div class="blog_post">
  <a name="la-commande-commit"></a>
  <h2 class="blog_post_title"><a href="/blog/2011/04/23/la-commande-commit" rel="bookmark" title="Permanent Link to La commande commit">La commande commit</a></h2>
  <p class="related"><strong>23/04/2011 02:17 AM</strong> | categories: 

<a href='/blog/category/git-commit'>git-commit</a>, <a href='/blog/category/git'>git</a>
 | <a href="http://www.gitfr.net/blog/2011/04/23/la-commande-commit#disqus_thread">Commentaires</a>
<p/>
  <div class="post_prose">
    
  <p>Maintenant que nous savons construire notre commit temporaire (l'index), nous allons voir comment le transformer en commit définitif. Il est intéressant de noter que vous pouvez <strong>shinter</strong> la commande <code>add</code> de plusieurs façons :</p>
<ul>
<li>
<p>En désignant le(s) fichier(s) directement : <code>git commit monfichier</code></p>
</li>
<li>
<p>En mode interactif (en fait appelle son équivalent dans <code>git add</code>) : <code>git commit -i</code></p>
</li>
<li>
<p>En prenant tous les fichiers déja tracés, avec l'option <code>git commit -a</code></p>
</li>
</ul>
<p>Comme j'ai pu le dire dans mes présentations, je vous conseille fortement d'utiliser l'index, même si cela peut sembler inintéressant ou futile au premier abord (vous allez surement pensez cela au début).</p>
<p>La commande <code>commit</code> dispose de plusieurs options pour vous simplfier la vie. Comme spécifier l'auteur (<code>--author=</code>), la date (<code>--date=</code>), le contenu d'un fichier comme message de commit (<code>-F</code>), signer le message (<code>-s</code>), spécifier le message en ligne de commande (<code>-m</code>)... Bref, rien de bien compliqué et je vous encourage, comme d'habitude, à lire le manuel (<code>man git commit</code>). Mais je vous propose néanmoins de nous attarder sur 2 options fort intéressantes.</p>
<h2>Commencer par un commit vide</h2>
<p>Quand je créé un dépôt, je commence toujours pas un commit vide (option <code>--allow-empty</code>) pour avoir  un commit de <strong>référence</strong>. A quoi cela peut il servir ?</p>
<ul>
<li>
<p>Si je travaille directement dans <em>master</em>, je peux revoir l'ensemble des commits (par un <code>rebase -i</code>, article à venir), ce qui n'est pas possible si mon premier commit contient des données.</p>
</li>
<li>
<p>Si je travaill dans une branche, je peux faire un merge (autre article à venir) en modélisant le merge dans master. Ce qui n'est pas possible si je n'ai pas de commit uniquement dans master.</p>
</li>
</ul>
<p>Je trouve que c'est une très bonne pratique que je vous conseille. Pour ma part, j'appelle  toujours ce commit «Initial commit».</p>
<h2>Modifier son dernier commit</h2>
<p>Malgré l'index, il m'arrive souvent de me rendre compte d'une erreur aprés coup. C'est la qu'intervient l'option <code>--amend</code>, qui écrase le dernier commit par celui que vous êtes en train de faire. Vraiment pratique ! On voici ici tout l'intérêt de ne <strong>pas</strong> pousser en permanence ses commits sur le serveur, mais d'attendre d'avoir fini le travail. Ce qui permet de pousser un ensemble de commits cohérents.</p>
<h2>De l'art du bon message</h2>
<p>Un petit mot pour rappeler l'importance de bien choisir son message de commit. Git possède une convention : la 1ere ligne est le résumé, suivi d'un saut de ligne, puis du contenu plus exhaustif du commit. Au travail nous avons une autre convention :</p>
<ul>
<li>Chaque ligne commence par le type de modification : new, fix, chg</li>
<li>Le signe :</li>
<li>Puis la cible du message : usr (utilisateur), dev (développeur), pkg (packageur)</li>
<li>Le signe :</li>
<li>Et enfin le message</li>
</ul>
<p>Un exemple :</p>
<blockquote>
<p>chg: pkg: remove sact.nevrax.skin dependency</p>
</blockquote>
<p>Et nous avons autant de ligne que nécessaire, ce qui permet de voir rapidement si notre commit est <strong>unitaire</strong> : si des lignes n'ont rien à voir entre elles, on le voit facilement. Cela nous pousse dans cette bonne pratique. Nous ne suivons donc pas la convention Git, mais cela est adapté à nos besoins (rapidité d'écriture, simplicité de relecture, commit unitaire) et que nous tous dans la même pièce, avec <em>daily meeting</em> et revue de code. Sur un projet Libre, il peut être intéressant d'avoir un descriptif long du commit.</p>
<p>De plus, un outil transforme automatiquement les messages en changelog (un exemple <a href="http://pypi.python.org/pypi/sact.epoch/1.0.1">ici</a>, ce qui est bien utile.</p>

  </div>
</div>



<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_url = "http://www.gitfr.net/blog/2011/04/23/la-commande-commit";
</script>
<script type="text/javascript" src="http://disqus.com/forums/gitfr/embed.js"></script>
<noscript><a href="http://gitfr.disqus.com/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

        </div><!-- End Prose Block -->
        
  <div class="right_sidebar">
    <div id="right_sidebar">
  <div id="rss">
    <h2>flux RSS</h2>
    <a href="http://feeds.feedburner.com/gitfr">billets</a>
    /
    <a href="http://gitfr.disqus.com/latest.rss">commentaires</a>
  </div>
  <div id="contact">
    <h2>Contact</h2>
    mail : seb@gitfr.net<br />
    liste de diffusion : <a href="http://groups.google.com/group/gitfr">gitfr</a><br />
    IRC : #git-fr sur Freenode
  </div>
  <div id="blog_post_list">
    <h2>Derniers billets</h2>
    <ul>
    <li><a href="/blog/2011/08/17/google-code-supporte-git">Google Code supporte Git</a></li>
    <li><a href="/blog/2011/07/09/gitfr-sur-github">gitfr sur GitHub</a></li>
    <li><a href="/blog/2011/07/09/git-1.7.6-publiee">Git 1.7.6 publiée</a></li>
    <li><a href="/blog/2011/06/13/cycle-de-release-raccourci">Cycle de release raccourci</a></li>
    <li><a href="/blog/2011/06/13/git-blameall">git blameall</a></li>
    <li><a href="/blog/2011/06/13/git-1.7.5.4-publiee">Git 1.7.5.4 publiée</a></li>
    <li><a href="/blog/2011/06/13/git-1.7.5.3-publiee">Git 1.7.5.3 publiée</a></li>
    <li><a href="/blog/2011/06/13/git-1.7.5.2-publiee">Git 1.7.5.2 publiée</a></li>
  </ul>
  </div>
  <div id="on_twitter">
    <h3>Sur Twitter</h2>
    <div id="blogofile_tweets"></div>
    <a href="http://twitter.com/gitfr" style="float: right">Plus de tweets</a>
  </div>
  <div id="categories">
    <h2>Categories</h2>
    <ul>
     <li><a href="/blog/category/atelier">atelier</a> (<a href="/blog/category/atelier/feed">rss</a>) (12)</li>
     <li><a href="/blog/category/configuration">configuration</a> (<a href="/blog/category/configuration/feed">rss</a>) (6)</li>
     <li><a href="/blog/category/git">git</a> (<a href="/blog/category/git/feed">rss</a>) (46)</li>
     <li><a href="/blog/category/git-add">git-add</a> (<a href="/blog/category/git-add/feed">rss</a>) (1)</li>
     <li><a href="/blog/category/git-checkout">git-checkout</a> (<a href="/blog/category/git-checkout/feed">rss</a>) (1)</li>
     <li><a href="/blog/category/git-clone">git-clone</a> (<a href="/blog/category/git-clone/feed">rss</a>) (1)</li>
     <li><a href="/blog/category/git-commit">git-commit</a> (<a href="/blog/category/git-commit/feed">rss</a>) (1)</li>
     <li><a href="/blog/category/git-init">git-init</a> (<a href="/blog/category/git-init/feed">rss</a>) (1)</li>
     <li><a href="/blog/category/git-reset">git-reset</a> (<a href="/blog/category/git-reset/feed">rss</a>) (1)</li>
     <li><a href="/blog/category/git-revert">git-revert</a> (<a href="/blog/category/git-revert/feed">rss</a>) (1)</li>
     <li><a href="/blog/category/git-rm">git-rm</a> (<a href="/blog/category/git-rm/feed">rss</a>) (1)</li>
     <li><a href="/blog/category/gitfr">gitfr</a> (<a href="/blog/category/gitfr/feed">rss</a>) (15)</li>
     <li><a href="/blog/category/github">github</a> (<a href="/blog/category/github/feed">rss</a>) (10)</li>
     <li><a href="/blog/category/google-code">google code</a> (<a href="/blog/category/google-code/feed">rss</a>) (1)</li>
     <li><a href="/blog/category/installation">installation</a> (<a href="/blog/category/installation/feed">rss</a>) (3)</li>
     <li><a href="/blog/category/macos">macos</a> (<a href="/blog/category/macos/feed">rss</a>) (2)</li>
     <li><a href="/blog/category/migration">migration</a> (<a href="/blog/category/migration/feed">rss</a>) (5)</li>
     <li><a href="/blog/category/outil">outil</a> (<a href="/blog/category/outil/feed">rss</a>) (4)</li>
     <li><a href="/blog/category/release">release</a> (<a href="/blog/category/release/feed">rss</a>) (15)</li>
     <li><a href="/blog/category/traduction">traduction</a> (<a href="/blog/category/traduction/feed">rss</a>) (1)</li>
     <li><a href="/blog/category/ubuntu">ubuntu</a> (<a href="/blog/category/ubuntu/feed">rss</a>) (1)</li>
     <li><a href="/blog/category/windows">windows</a> (<a href="/blog/category/windows/feed">rss</a>) (2)</li>
    </ul>
  </div> 
  <div id="archives">			
    <h2>Archives</h2>
    <ul>
      <li><a href="/blog/archive/2011/08/1" title="August 2011">August 2011</a>&nbsp;(1)</li>
      <li><a href="/blog/archive/2011/07/1" title="July 2011">July 2011</a>&nbsp;(2)</li>
      <li><a href="/blog/archive/2011/06/1" title="June 2011">June 2011</a>&nbsp;(6)</li>
      <li><a href="/blog/archive/2011/05/1" title="May 2011">May 2011</a>&nbsp;(2)</li>
      <li><a href="/blog/archive/2011/04/1" title="April 2011">April 2011</a>&nbsp;(23)</li>
      <li><a href="/blog/archive/2011/03/1" title="March 2011">March 2011</a>&nbsp;(4)</li>
      <li><a href="/blog/archive/2011/02/1" title="February 2011">February 2011</a>&nbsp;(3)</li>
      <li><a href="/blog/archive/2011/01/1" title="January 2011">January 2011</a>&nbsp;(1)</li>
      <li><a href="/blog/archive/2010/12/1" title="December 2010">December 2010</a>&nbsp;(12)</li>
      <li><a href="/blog/archive/2010/11/1" title="November 2010">November 2010</a>&nbsp;(12)</li>
      <li><a href="/blog/archive/2010/10/1" title="October 2010">October 2010</a>&nbsp;(3)</li>
    </ul>
  </div>
  <div id="credits">
    <h2>Crédits</h2>
    Propulsé par <a href="http://www.blogofile.com">Blogofile</a>
  </div>

</div>

  </div>

      </div><!-- End Main Block -->
    </div> <!-- End Content -->

    <script type="text/javascript">
  
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-19444937-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script');
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            ga.setAttribute('async', 'true');
            document.documentElement.firstChild.appendChild(ga);
        })();

    </script>
  </body>
</html>





